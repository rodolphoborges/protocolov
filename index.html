async function fetchAndProcessData() {
    try {
        // Agora você consome o JSON que o GitHub Actions gerou!
        const response = await fetch('data.json?t=' + Date.now());
        const playersData = await response.json();
        
        playersData.forEach(player => {
            let roleRaw = player.roleRaw.toLowerCase();
            
            for (let role in rolesConfig) {
                const searchTerms = role === 'Controlador' ? ['controlador', 'smoker'] : [role.toLowerCase()];
                if (searchTerms.some(term => roleRaw.includes(term))) {
                    
                    if (rolesConfig[role].current < rolesConfig[role].max) {
                        rolesConfig[role].current++;
                        rolesConfig[role].players.push(player);
                    } else if (rolesConfig[role].waitlist.length < 4) {
                        rolesConfig[role].waitlist.push(player);
                    }
                    break;
                }
            }
        });
        
        renderRoles(); // Sua função renderRoles agora já pode montar o HTML completo direto, pois os ranks, ícones e level já estão dentro do objeto 'player' que veio do JSON.
        
    } catch (e) {
        console.error("Ainda não há dados cacheados ou erro ao ler o JSON.", e);
    }
}
